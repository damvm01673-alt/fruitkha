@model FruitkhaWeb.Models.Product

@{
    ViewData["Title"] = Model.Name;
    var relatedProducts = ViewBag.RelatedProducts as List<FruitkhaWeb.Models.Product>;
}

<!-- breadcrumb -->
<div class="breadcrumb-section breadcrumb-bg">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 offset-lg-2 text-center">
				<div class="breadcrumb-text">
					<p>Chi tiết sản phẩm</p>
					<h1>@Model.Name</h1>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- end breadcrumb -->

<!-- single product -->
<div class="single-product mt-150 mb-150">
	<div class="container">
		<div class="row">
			<div class="col-md-5">
				<div class="single-product-img">
					<img src="~/@(Model.ImageUrl ?? "assets/img/products/product-img-1.jpg")" alt="@Model.Name">
				</div>
			</div>
			<div class="col-md-7">
				<div class="single-product-content">
					<h3>@Model.Name</h3>
					<p class="single-product-pricing">
						@if (Model.SalePrice.HasValue)
						{
							<span style="text-decoration: line-through; color: #999;">@Model.Price.ToString("N0")đ</span>
							<span class="orange-text">@Model.SalePrice.Value.ToString("N0")đ</span>
						}
						else
						{
							<span>@Model.Price.ToString("N0")đ</span>
						}
					</p>
					<p>@Model.Description</p>
					<div class="single-product-form">
						<form asp-controller="Cart" asp-action="AddToCart" asp-route-id="@Model.Id" method="post">
							<input type="number" name="quantity" value="1" min="1" placeholder="Số lượng">
							<button type="submit" class="cart-btn"><i class="fas fa-shopping-cart"></i> Thêm vào giỏ</button>
						</form>
						<p><strong>Danh mục: </strong>@Model.Category.Name</p>
						<p><strong>Tồn kho: </strong>@Model.Stock</p>
						@if (Model.IsNewProduct)
						{
							<p><span class="badge badge-success">Sản phẩm mới</span></p>
						}
						@if (Model.IsPromotional)
						{
							<p><span class="badge badge-danger">Đang khuyến mãi</span></p>
						}
					</div>
					<h4>Chia sẻ:</h4>
					<ul class="product-share">
						<li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
						<li><a href="#"><i class="fab fa-twitter"></i></a></li>
						<li><a href="#"><i class="fab fa-instagram"></i></a></li>
						<li><a href="#"><i class="fab fa-linkedin"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- end single product -->

<!-- related products -->
@if (relatedProducts != null && relatedProducts.Any())
{
	<div class="more-products mb-150">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="section-title">	
						<h3><span class="orange-text">Sản phẩm</span> Liên quan</h3>
						<p>Các sản phẩm tương tự có thể bạn quan tâm.</p>
					</div>
				</div>
			</div>
			<div class="row">
				@foreach (var product in relatedProducts)
				{
					<div class="col-lg-4 col-md-6 text-center">
						<div class="single-product-item">
							<div class="product-image">
								<a asp-controller="Products" asp-action="Details" asp-route-id="@product.Id">
									<img src="~/@(product.ImageUrl ?? "assets/img/products/product-img-1.jpg")" alt="@product.Name">
								</a>
							</div>
							<h3>@product.Name</h3>
							<p class="product-price">
								@if (product.SalePrice.HasValue)
								{
									<span style="text-decoration: line-through; color: #999;">@product.Price.ToString("N0")đ</span>
									<span class="orange-text">@product.SalePrice.Value.ToString("N0")đ</span>
								}
								else
								{
									<span>@product.Price.ToString("N0")đ</span>
								}
							</p>
							<a asp-controller="Cart" asp-action="AddToCart" asp-route-id="@product.Id" class="cart-btn"><i class="fas fa-shopping-cart"></i> Thêm vào giỏ</a>
						</div>
					</div>
				}
			</div>
		</div>
	</div>
}
<!-- end related products -->
